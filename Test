<div style="padding: 20px">
  <h2>Create New Simulation</h2>

  <mat-form-field class="example-full-width" style="width: 400px">
    <mat-label>Search for Instrument (ISIN, Issuer...)</mat-label>
    <input
      type="text"
      placeholder="Start typing..."
      matInput
      [formControl]="searchControl"
      [matAutocomplete]="auto"
    />
    
    @if (isSearching()) {
      <mat-progress-spinner
        matSuffix
        mode="indeterminate"
        [diameter]="20"
      ></mat-progress-spinner>
    }

    <mat-autocomplete
      #auto="matAutocomplete"
      (optionSelected)="onOptionSelected($event)"
      [displayWith]="displayFn"
    >
      @for (option of searchResults(); track option.id) {
        <mat-option [value]="option">
          {{ option.description }}
        </mat-option>
      }
      
      @if (isSearching() && searchResults().length === 0) {
        <mat-option disabled>Loading...</mat-option>
      }
      
      @if (!isSearching() && searchTerm().length > 0 && searchResults().length === 0) {
        <mat-option disabled>No results found</mat-option>
      }

    </mat-autocomplete>
  </mat-form-field>

  <hr style="margin: 20px 0" />

  <h3>Simulation Instruments</h3>

  <ag-grid-angular
    style="width: 100%; height: 500px"
    class="ag-theme-quartz"
    [rowData]="rowData()"
    [columnDefs]="colDefs()"
  >
  </ag-grid-angular>
</div>
